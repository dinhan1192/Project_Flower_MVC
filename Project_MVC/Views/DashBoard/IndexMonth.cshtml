
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div align="right">
    <a href="@Url.Action("IndexYear", "DashBoard")" class="btn btn-primary" id="watchYear">Watch the Revenues of Years</a>
</div>

<div>
    @using (Html.BeginForm("IndexMonth", "DashBoard", FormMethod.Get))
    {
        <p>
            Find by Year: @Html.TextBox("SearchString", ViewBag.CurrentFilter as string, new { @class = "form-control" })
            <input type="submit" value="Search" />
        </p>
    }
</div>

@*<div id="chartContainer"></div>*@
<div id="testchart"></div>

@section scripts{
    @*<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
        <script type="text/javascript">

        window.onload = function () {
            var chart = new CanvasJS.Chart("chartContainer", {
                theme: "light2",
                animationEnabled: true,
                title: {
                    text: "Revenues of Months"
                },
                subtitles: [
                    { text: "Try Resizing the Browser" }
                ],
                data: [
                {
                    type: "column", //change type to bar, line, area, pie, etc
                    dataPoints: @Html.Raw(ViewBag.DataPoints)
                }
                ]
            });
            chart.render();
        };
        </script>*@
    <script src="https://www.gstatic.com/charts/loader.js"></script>
    @*<script>
            google.charts.load('current', { 'packages': ['corechart'] });
            google.charts.setOnLoadCallback(drawChart);

            function drawChart() {
                debugger;
                var data = new google.visualization.DataTable();
                data.addColumn('date', 'X');
                data.addColumn('number', 'series a');
                //data.addColumn('number', 'series b')
                data.addRows([
                    //[new Date(1472688000000), 2.08023, 1.99324],
                    //[new Date(1472774400000), null, 2.00112],
                    //[new Date(1472947200000), 2.01123, null]
                    //[new Date(1472688000000), 1.99324],
                    //[new Date(1472774400000), 2.00112],
                    //[new Date(1472947200000), null]
                    [new Date(2020, 2, 3), 2.08023],
                    [new Date(2020, 3, 4), null],
                    [new Date(2020, 4, 5), 2.01123]
                ]);

                var options = {
                    interpolateNulls: true
                };

                var container = document.getElementById('chart_div');
                var chart = new google.visualization.LineChart(container);
                chart.draw(data, options);
            }
        </script>*@
    @*<script>
            var data = google.visualization.arrayToDataTable([
                ['Date', 'Amount'],
                ['09 Jan', 13],
                ['29 Jan', 11],
                ['29 Jan', 9],
                ['29 Jan', 4],
                ['29 Jan', -3],
                ['29 Jan', 0],
                ['29 Jan', -3],
                ['30 Jan', -5],
                ['30 Jan', 0],
                ['30 Jan', -1],
                ['30 Jan', -2],
                ['30 Jan', -3],
                ['30 Jan', -4],
                ['30 Jan', -5]
            ]);

            var dataLast = google.visualization.data.group(
                data,  // data table
                [0],   // group by column
                [{     // aggregated column
                    column: 1,
                    type: 'number',
                    label: data.getColumnLabel(1),
                    // aggregation function
                    aggregation: function (values) {
                        // return the last value for the group
                        return values[values.length - 1];
                    }
                }]
            );

            var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
            chart.draw(dataLast);  // use grouped data to draw the chart
        </script>*@
    @*<script>
            google.load('visualization', '1', { packages: ['corechart', 'line'] });
            google.setOnLoadCallback(drawCurveTypes);

            function drawCurveTypes() {
                var data = new google.visualization.DataTable();
                data.addColumn('date', 'Day');
                data.addColumn('number', 'Value 1');
                //data.addColumn('number', 'Value 2');

                data.addRows([
                    [new Date('2015-01-01'), 40],
                    [new Date('2015-01-15'), 20],
                    [new Date('2015-02-01'), 20],
                    [new Date('2015-02-15'), 60],
                    [new Date('2015-03-01'), 40],
                    [new Date('2015-03-15'), 20],
                    [new Date('2015-04-01'), 20],
                    [new Date('2015-04-15'), 60],
                    [new Date('2015-05-01'), 40],
                    [new Date('2015-05-15'), 20],
                    [new Date('2016-06-01'), 20],
                    [new Date('2015-06-15'), 60],
                    [new Date('2015-07-01'), 40],
                    [new Date('2015-07-15'), 20],
                    [new Date('2015-08-01'), 20],
                    [new Date('2017-08-15'), 60],
                    [new Date('2015-09-01'), 40],
                    [new Date('2015-09-15'), 20],
                    [new Date('2015-10-01'), 20],
                    [new Date('2018-10-15'), 60],
                    [new Date('2015-11-01'), 40],
                    [new Date('2015-11-15'), 20],
                    [new Date('2019-12-01'), 20],
                    [new Date('2019-12-15'), 60],
                ]);

                var dateTicks = [];
                for (var m = 1; m <= 12; m++)
                    dateTicks.push(new Date('2015-' + m + '-1'));

                var options = {
                    hAxis: {
                        format: 'MMMM',
                        ticks: dateTicks
                    }
                };

                var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
                chart.draw(data, options);
            }
        </script>*@
    <script>
        //function drawChart() {
        //    var data = new google.visualization.DataTable();
        //    data.addColumn('date', 'Date');
        //    data.addColumn('number', '2011');
        //    data.addColumn('number', '2012');
        //    data.addColumn('number', '2013');
        //    data.addColumn('number', '2014');

        //    data.addRows([
        //        [new Date("2011-02-01T15:18:21+00:00"), 21.77, null, null, null],
        //        [new Date("2011-03-01T15:18:59+00:00"), 20.96, null, null, null],
        //        [new Date("2011-04-01T15:19:22+00:00"), 15.75, null, null, null],
        //        [new Date("2011-05-01T15:19:44+00:00"), 6.92, null, null, null],
        //        [new Date("2011-06-01T08:12:00+00:00"), 4.46, null, null, null],
        //        [new Date("2011-07-06T07:54:00+00:00"), 2.54, null, null, null],
        //        [new Date("2011-08-01T15:30:21+00:00"), 2.96, null, null, null],
        //        [new Date("2011-09-01T15:30:35+00:00"), 2.94, null, null, null],
        //        [new Date("2011-10-01T15:30:58+00:00"), 3.3, null, null, null],
        //        [new Date("2011-11-01T15:31:37+00:00"), 10.72, null, null, null],
        //        [new Date("2011-12-01T07:54:15+00:00"), 17.04, null, null, null],
        //        [new Date("2012-01-01T10:29:00+00:00"), null, 20.43, null, null],
        //        [new Date("2012-02-01T08:03:00+00:00"), null, 22.51, null, null],
        //        [new Date("2012-03-01T08:07:00+00:00"), null, 26.75, null, null],
        //        [new Date("2012-04-01T12:58:04+00:00"), null, 13.09, null, null],
        //        [new Date("2012-05-01T12:58:59+00:00"), null, 13.52, null, null],
        //        [new Date("2012-06-01T08:09:00+00:00"), null, 4.71, null, null],
        //        [new Date("2012-07-01T13:00:06+00:00"), null, 3.92, null, null],
        //        [new Date("2012-08-01T08:02:00+00:00"), null, 2.85, null, null],
        //        [new Date("2012-09-01T09:52:18+00:00"), null, 3.05, null, null],
        //        [new Date("2012-10-01T17:13:00+00:00"), null, 4.2, null, null],
        //        [new Date("2012-11-01T10:03:00+00:00"), null, 10.79, null, null],
        //        [new Date("2012-12-01T10:52:00+00:00"), null, 16.68, null, null],
        //        [new Date("2013-01-02T16:16:00+00:00"), null, null, 20.7, null],
        //        [new Date("2013-02-03T13:51:00+00:00"), null, null, 24.41, null],
        //        [new Date("2013-03-01T08:06:00+00:00"), null, null, 25.44, null],
        //        [new Date("2013-04-01T09:58:00+00:00"), null, null, 23.15, null],
        //        [new Date("2013-05-01T20:26:00+00:00"), null, null, 12.13, null],
        //        [new Date("2013-06-01T13:19:00+00:00"), null, null, 6.77, null],
        //        [new Date("2013-07-01T18:09:00+00:00"), null, null, 4.26, null],
        //        [new Date("2013-08-23T14:32:00+00:00"), null, null, 2.67, null],
        //        [new Date("2013-09-01T09:41:00+00:00"), null, null, 3.25, null],
        //        [new Date("2013-10-01T12:42:14+00:00"), null, null, 5.2, null],
        //        [new Date("2013-11-01T12:43:17+00:00"), null, null, 8.95, null],
        //        [new Date("2013-12-01T12:43:38+00:00"), null, null, 17.02, null],
        //        [new Date("2014-01-01T10:19:00+00:00"), null, null, null, 16.24],
        //        [new Date("2014-02-01T10:16:00+00:00"), null, null, null, 19.13],
        //        [new Date("2014-03-01T08:05:00+00:00"), null, null, null, 17.68],
        //        [new Date("2014-04-01T08:11:00+00:00"), null, null, null, 10.97],
        //        [new Date("2014-05-01T09:06:00+00:00"), null, null, null, 6.57],
        //        [new Date("2014-07-01T07:57:00+00:00"), null, null, null, 4.25],
        //        [new Date("2014-08-03T11:26:00+00:00"), null, null, null, 2.14],
        //        [new Date("2014-09-02T08:04:00+00:00"), null, null, null, 2.95],
        //        [new Date("2014-10-01T07:18:00+00:00"), null, null, null, 3.75]
        //    ]);

        //    var dView = new google.visualization.DataView(data);
        //    dView.setColumns([
        //        { calc: getmon, type: 'number', label: "Month" }
        //        , 1
        //        , 2
        //        , 3
        //        , 4]);
        //    function getmon(dataTable, rowNum) {
        //        var rd = dataTable.getValue(rowNum, 0);
        //        var rm = rd.getMonth();
        //        return { v: rm };
        //    }

        //    var options = {
        //        hAxis: {
        //            title: 'Month'
        //            , showTextEvery: 1
        //            , ticks: [{ v: 0, f: 'Jan' }, { v: 1, f: 'Feb' }, { v: 2, f: 'Mar' }, { v: 3, f: 'Apr' }, { v: 4, f: 'May' }, { v: 5, f: 'Jun' }, { v: 6, f: 'Jul' }, { v: 7, f: 'Aug' }, { v: 8, f: 'Sep' }, { v: 9, f: 'Oct' }, { v: 10, f: 'Nov' }, { v: 11, f: 'Dec' }]
        //        }
        //    }

        //    var chart = new google.visualization.LineChart(document.getElementById('testchart'));
        //    chart.draw(dView, options);
        //}
        //drawChart();
        function drawChart() {
            var data = new google.visualization.DataTable();
            data.addColumn('date', 'Date');
            data.addColumn('number', '2011');
            data.addColumn('number', '2012');
            data.addColumn('number', '2013');
            data.addColumn('number', '2014');

            data.addRows([
                [new Date("2011-02-01T15:18:21+00:00"), 21.77, null, null, null],
                [new Date("2011-03-01T15:18:59+00:00"), 20.96, null, null, null],
                [new Date("2011-04-01T15:19:22+00:00"), 15.75, null, null, null],
                [new Date("2011-05-01T15:19:44+00:00"), 6.92, null, null, null],
                [new Date("2011-06-01T08:12:00+00:00"), 4.46, null, null, null],
                [new Date("2011-07-06T07:54:00+00:00"), 2.54, null, null, null],
                [new Date("2011-08-01T15:30:21+00:00"), 2.96, null, null, null],
                [new Date("2011-09-01T15:30:35+00:00"), 2.94, null, null, null],
                [new Date("2011-10-01T15:30:58+00:00"), 3.3, null, null, null],
                [new Date("2011-11-01T15:31:37+00:00"), 10.72, null, null, null],
                [new Date("2011-12-01T07:54:15+00:00"), 17.04, null, null, null],
                [new Date("2012-01-01T10:29:00+00:00"), null, 20.43, null, null],
                [new Date("2012-02-01T08:03:00+00:00"), null, 22.51, null, null],
                [new Date("2012-03-01T08:07:00+00:00"), null, 26.75, null, null],
                [new Date("2012-04-01T12:58:04+00:00"), null, 13.09, null, null],
                [new Date("2012-05-01T12:58:59+00:00"), null, 13.52, null, null],
                [new Date("2012-06-01T08:09:00+00:00"), null, 4.71, null, null],
                [new Date("2012-07-01T13:00:06+00:00"), null, 3.92, null, null],
                [new Date("2012-08-01T08:02:00+00:00"), null, 2.85, null, null],
                [new Date("2012-09-01T09:52:18+00:00"), null, 3.05, null, null],
                [new Date("2012-10-01T17:13:00+00:00"), null, 4.2, null, null],
                [new Date("2012-11-01T10:03:00+00:00"), null, 10.79, null, null],
                [new Date("2012-12-01T10:52:00+00:00"), null, 16.68, null, null],
                [new Date("2013-01-02T16:16:00+00:00"), null, null, 20.7, null],
                [new Date("2013-02-03T13:51:00+00:00"), null, null, 24.41, null],
                [new Date("2013-03-01T08:06:00+00:00"), null, null, 25.44, null],
                [new Date("2013-04-01T09:58:00+00:00"), null, null, 23.15, null],
                [new Date("2013-05-01T20:26:00+00:00"), null, null, 12.13, null],
                [new Date("2013-06-01T13:19:00+00:00"), null, null, 6.77, null],
                [new Date("2013-07-01T18:09:00+00:00"), null, null, 4.26, null],
                [new Date("2013-08-23T14:32:00+00:00"), null, null, 2.67, null],
                [new Date("2013-09-01T09:41:00+00:00"), null, null, 3.25, null],
                [new Date("2013-10-01T12:42:14+00:00"), null, null, 5.2, null],
                [new Date("2013-11-01T12:43:17+00:00"), null, null, 8.95, null],
                [new Date("2013-12-01T12:43:38+00:00"), null, null, 17.02, null],
                [new Date("2014-01-01T10:19:00+00:00"), null, null, null, 16.24],
                [new Date("2014-02-01T10:16:00+00:00"), null, null, null, 19.13],
                [new Date("2014-03-01T08:05:00+00:00"), null, null, null, 17.68],
                [new Date("2014-04-01T08:11:00+00:00"), null, null, null, 10.97],
                [new Date("2014-05-01T09:06:00+00:00"), null, null, null, 6.57],
                [new Date("2014-07-01T07:57:00+00:00"), null, null, null, 4.25],
                [new Date("2014-08-03T11:26:00+00:00"), null, null, null, 2.14],
                [new Date("2014-09-02T08:04:00+00:00"), null, null, null, 2.95],
                [new Date("2014-10-01T07:18:00+00:00"), null, null, null, 3.75]
            ]);

            var dView = new google.visualization.DataView(data);
            dView.setColumns([{
                calc: getmon,
                type: 'number',
                label: "Month"
            },
                1, 2, 3, 4]);

            function getmon(dataTable, rowNum) {
                var rd = dataTable.getValue(rowNum, 0);
                var rm = rd.getMonth();
                return {
                    v: rm
                };
            }

            var options = {
                hAxis: {
                    title: 'Month',
                    showTextEvery: 1,
                    ticks: [{
                        v: 0,
                        f: 'Jan'
                    }, {
                        v: 1,
                        f: 'Feb'
                    }, {
                        v: 2,
                        f: 'Mar'
                    }, {
                        v: 3,
                        f: 'Apr'
                    }, {
                        v: 4,
                        f: 'May'
                    }, {
                        v: 5,
                        f: 'Jun'
                    }, {
                        v: 6,
                        f: 'Jul'
                    }, {
                        v: 7,
                        f: 'Aug'
                    }, {
                        v: 8,
                        f: 'Sep'
                    }, {
                        v: 9,
                        f: 'Oct'
                    }, {
                        v: 10,
                        f: 'Nov'
                    }, {
                        v: 11,
                        f: 'Dec'
                    }]
                }
            }

            var chart = new google.visualization.LineChart(document.getElementById('testchart'));
            chart.draw(dView, options);
        }

        google.load("visualization", "1", {
            packages: ["corechart"]
        });
        google.setOnLoadCallback(drawChart);
    </script>
}

